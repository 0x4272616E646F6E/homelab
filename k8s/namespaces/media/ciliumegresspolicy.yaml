apiVersion: cilium.io/v2
kind: CiliumEgressGatewayPolicy
metadata:
  name: media-egress
  labels:
    app.kubernetes.io/managed-by: flux
    app.kubernetes.io/name: media
spec:
  selectors:
    - podSelector:
        matchExpressions:
          - {key: app, operator: In, values: [flaresolverr, qbittorrent, sabnzbd, rtorrent, nzbget]}
      namespaceSelector:
        matchLabels:
          name: media
  destinationCIDRs:
    - "0.0.0.0/0"
  egressGateway:
    nodeSelector:
      matchLabels:
        egress-gw: wg0
    interface: wg0