apiVersion: v1
kind: ConfigMap
metadata:
  name: local-path-provisioner-config-map
  namespace: kube-system
data:
  values.yaml: |-
    # Local Path Provisioner Configuration - Only Custom Values
    # Chart defaults are used for all other settings

    storageClass:
      create: false
    nodePathMap:
      - node: DEFAULT_PATH_FOR_NON_LISTED_NODES
        paths:
          - /var/mnt/storage/local-path-provisioner
    storageClassConfigs:
      local-path-rwo:
        storageClass:
          create: true
          name: local-path-rwo
          defaultClass: true
          defaultVolumeType: hostPath
          reclaimPolicy: Retain
          volumeBindingMode: WaitForFirstConsumer
          allowVolumeExpansion: true
        nodePathMap:
          - node: DEFAULT_PATH_FOR_NON_LISTED_NODES
            paths:
              - /var/mnt/storage/local-path-provisioner/rwo
      local-path-rwx:
        storageClass:
          create: true
          name: local-path-rwx
          defaultClass: false
          defaultVolumeType: hostPath
          reclaimPolicy: Retain
          volumeBindingMode: Immediate
          allowVolumeExpansion: true
        sharedFileSystemPath: /var/mnt/storage/local-path-provisioner/rwx
    tolerations:
      - key: "node-role.kubernetes.io/control-plane"
        operator: "Exists"
        effect: "NoSchedule"
      - key: "node-role.kubernetes.io/master"
        operator: "Exists"
        effect: "NoSchedule"
