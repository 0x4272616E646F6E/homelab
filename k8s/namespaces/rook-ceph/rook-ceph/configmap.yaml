apiVersion: v1
kind: ConfigMap
metadata:
  name: rook-ceph-config-map
  namespace: rook-ceph
data:
  values.yaml: |-
    image:
      repository: docker.io/rook/ceph
      tag: v1.18.2
      pullPolicy: IfNotPresent

    # Keep logs at default verbosity
    logLevel: INFO

    # Minimal CSI settings (use chart defaults otherwise)
    csi:
      enableRbdDriver: true
      enableCephfsDriver: true
      enableCSIHostNetwork: false

    # Disable NET_RAW capability drop for OSD containers
    csi:
      csiRBDProvisionerResource: |
        spec:
          template:
            spec:
              containers:
              - name: csi-provisioner
                securityContext:
                  capabilities:
                    drop: []
      csiRBDPluginResource: |
        spec:
          template:
            spec:
              containers:
              - name: csi-rbdplugin
                securityContext:
                  capabilities:
                    drop: []
      csiCephFSProvisionerResource: |
        spec:
          template:
            spec:
              containers:
              - name: csi-provisioner
                securityContext:
                  capabilities:
                    drop: []
      csiCephFSPluginResource: |
        spec:
          template:
            spec:
              containers:
              - name: csi-cephfsplugin
                securityContext:
                  capabilities:
                    drop: []