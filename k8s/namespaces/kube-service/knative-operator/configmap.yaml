apiVersion: v1
kind: ConfigMap
metadata:
  name: knative-config-map
  namespace: kube-service
data:
  values.yaml: |-
    knative_operator:
      knative_operator:
        image: gcr.io/knative-releases/knative.dev/operator/cmd/operator@sha256:f35beb8ba91767ee9e0b5739e1f65fa7ae5590bca99829fc1abba8f8940aa662
        tag: ""
        affinity: {}
        tolerations: []
        containerSecurityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        resources:
          requests:
            cpu: 100m
            memory: 100Mi
          limits:
            cpu: 1000m
            memory: 1000Mi
      operator_webhook:
        image: gcr.io/knative-releases/knative.dev/operator/cmd/webhook@sha256:c97391dad3bbcff691a3b7f0198f418e725b813365bac5157a59aa723049f0d4
        tag: ""
        affinity:
          # To avoid node becoming SPOF, spread our replicas to different nodes.
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
              - podAffinityTerm:
                  labelSelector:
                    matchLabels:
                      app: operator-webhook
                  topologyKey: kubernetes.io/hostname
                weight: 100
        tolerations: []
        containerSecurityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        resources:
          requests:
            cpu: 100m
            memory: 100Mi
          limits:
            cpu: 500m
            memory: 500Mi
      kubernetes_min_version: v1.25.0