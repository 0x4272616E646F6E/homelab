# Generated by Ansible - DO NOT EDIT MANUALLY

{% if gpu_passthrough_enabled | default(false) %}
# GPU Passthrough - Blacklist host drivers for PCIe passthrough to VMs
{% for module in gpu_blacklist_modules %}
blacklist {{ module }}
{% endfor %}

{% if gpu_force_probe_options | default([]) | length > 0 %}
# Force probe options for specific GPU devices
{% for opt in gpu_force_probe_options %}
options {{ opt.module }} force_probe={{ opt.device_id }}
{% endfor %}
{% endif %}

{% if vfio_pci_ids | default([]) | length > 0 %}
# Bind devices to vfio-pci driver for passthrough
options vfio-pci ids={{ vfio_pci_ids | join(',') }}
{% endif %}
{% endif %}
