apiVersion: v1
kind: ConfigMap
metadata:
  name: coder-config-map
  namespace: development
data:
  values.yaml: |-
    coder:
      env:
        - name: CODER_PG_CONNECTION_URL
          valueFrom:
            secretKeyRef:
              name: coder-secrets
              key: POSTGRES_URL
        - name: CODER_OAUTH2_GITHUB_DEFAULT_PROVIDER_ENABLE
          value: "false"

      service:
        enable: true
        type: ClusterIP             # <-- this is all you need for a ClusterIP Service
        sessionAffinity: None       # valid: None or ClientIP
        annotations: {}

      ingress:
        enable: false